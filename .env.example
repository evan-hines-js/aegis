# Aegis MCP Hub - Environment Configuration Template
# Copy this file to .env and fill in your values

# ============================================================================
# REQUIRED - Database Configuration
# ============================================================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/aegis_dev

# ============================================================================
# REQUIRED - Security Secrets
# ============================================================================
# Phoenix secret for signing cookies (generate: mix phx.gen.secret)
SECRET_KEY_BASE=

# AES key for encrypting sensitive data (generate: mix phx.gen.secret 32)
ENCRYPTION_KEY=

# Secret for signing internal tokens and API keys
TOKEN_SIGNING_SECRET=

# ============================================================================
# OPTIONAL - Server Configuration
# ============================================================================
# Set to "true" to start the web server (required for releases)
PHX_SERVER=true

# Public hostname for the application
PHX_HOST=localhost

# HTTP port to listen on
PORT=4000

# Database connection pool size
POOL_SIZE=10

# Enable IPv6 (set to "true" or "1")
# ECTO_IPV6=false

# ============================================================================
# OPTIONAL - Security
# ============================================================================
# Separate secret for API key hashing (defaults to TOKEN_SIGNING_SECRET)
# API_KEY_SECRET=

# Comma-separated list of allowed CORS origins
# ALLOWED_ORIGINS=https://app1.example.com,https://app2.example.com

# ============================================================================
# OPTIONAL - Clustering (Multi-Node Deployments)
# ============================================================================
# DNS query for cluster discovery (e.g., "aegis.example.com")
# DNS_CLUSTER_QUERY=

# ============================================================================
# OPTIONAL - OAuth 2.0 / Keycloak Configuration
# ============================================================================
# OAuth issuer URL (e.g., "https://auth.example.com/realms/mcp")
# KEYCLOAK_ISSUER=http://localhost:8080/realms/aegis-mcp

# OAuth audience (your MCP hub identifier)
# KEYCLOAK_AUDIENCE=aegis-mcp-hub

# JWKS endpoint (defaults to issuer + /protocol/openid-connect/certs)
# KEYCLOAK_JWKS_URL=http://localhost:8080/realms/aegis-mcp/protocol/openid-connect/certs

# Keycloak base URL
# KEYCLOAK_BASE_URL=http://localhost:8080

# Keycloak realm name
# KEYCLOAK_REALM=aegis-mcp

# WWW-Authenticate realm for OAuth challenges
# OAUTH_REALM=Aegis MCP Server

# URL to OAuth documentation
# OAUTH_RESOURCE_DOCUMENTATION=https://docs.example.com/oauth

# OAuth scopes supported by your Keycloak realm (comma-separated)
# Default: "openid,profile,email,offline_access"
# If your Keycloak realm only has 'openid' configured, set to: "openid"
# Ensure these scopes are configured as default client scopes in Keycloak
# OAUTH_SCOPES_SUPPORTED=openid,profile,email,offline_access

# ============================================================================
# OPTIONAL - Rate Limiting (requests per minute)
# ============================================================================
# Tool call operations
# MCP_TOOL_CALLS_LIMIT=100

# List operations (tools/list, resources/list, etc.)
# MCP_LIST_OPERATIONS_LIMIT=500

# Resource read operations
# MCP_RESOURCE_READS_LIMIT=1000

# Default operations
# MCP_DEFAULT_OPERATIONS_LIMIT=200

# Server info endpoint
# MCP_SERVER_INFO_LIMIT=2000

# SSE stream connections
# MCP_SSE_STREAMS_LIMIT=50

# Session deletion operations
# MCP_SESSION_DELETION_LIMIT=100

# Fallback rate limit
# MCP_FALLBACK_LIMIT=100

# ============================================================================
# OPTIONAL - Smart Pagination/Sorting
# ============================================================================
# Enable smart sorting
# SMART_SORTING_ENABLED=true

# Enable analytics for pagination
# SMART_PAGINATION_ANALYTICS_ENABLED=true

# Analytics retention in days
# SMART_PAGINATION_RETENTION_DAYS=90

# Usage decay window in hours
# SMART_PAGINATION_USAGE_DECAY_HOURS=48

# Recency decay window in hours
# SMART_PAGINATION_RECENCY_DECAY_HOURS=2
